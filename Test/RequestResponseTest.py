# coding:utf-8
from BaseSpider import BaseSpider
from SqlDBHelper import RequestResponseMap, ProxyItem
from SqlDBHelper import p_session as db
import re, math, json, datetime
from Request import Request
from Response import Response
import GlobalMethod as M
import pprint
usable_lst = ['60.250.139.213',
	   '163.125.74.115',
	   '209.216.205.248',
	   '37.14.112.205',
	   '110.19.189.244',
	   '171.38.182.18',
	   '183.63.110.202',
	   '144.217.128.235',
	   '66.104.77.20',
	   '219.101.35.83',
	   '202.212.39.206',
	   '186.227.192.75',
	   '59.76.81.3',
	   '191.22.182.221',
	   '219.120.40.138',
	   '82.194.48.22',
	   '138.255.105.51',
	   '177.131.55.10',
	   '200.144.28.60',
	   '174.32.127.19',
	   '27.46.74.38',
	   '175.155.24.62',
	   '59.48.65.11',
	   '125.109.198.67',
	   '141.196.139.159',
	   '74.54.60.162',
	   '121.9.221.188',
	   '192.129.237.136',
	   '93.39.194.66',
	   '222.186.45.115',
	   '191.22.170.36',
	   '220.194.55.244',
	   '125.39.129.67',
	   '210.138.113.170',
	   '218.75.100.114',
	   '183.31.249.166',
	   '59.76.81.3',
	   '210.238.184.144',
	   '121.232.146.57',
	   '101.20.212.244',
	   '124.88.67.81',
	   '220.130.10.171',
	   '60.160.128.10',
	   '61.53.137.50',
	   '61.132.171.173',
	   '14.28.138.161',
	   '113.106.74.17',
	   '61.178.63.197',
	   '207.234.146.197',
	   '220.194.55.244',
	   '200.174.85.193',
	   '221.195.40.145',
	   '203.91.121.74',
	   '208.92.94.190',
	   '119.5.1.14',
	   '115.231.105.109',
	   '219.109.124.214',
	   '221.204.246.116',
	   '222.128.83.39',
	   '202.109.207.102',
	   '171.38.182.18',
	   '221.176.181.110',
	   '93.110.167.253',
	   '123.138.89.130',
	   '221.130.202.206',
	   '58.62.207.53',
	   '117.90.1.246',
	   '122.18.111.127',
	   '175.155.24.31',
	   '175.155.137.97',
	   '60.190.96.190',
	   '60.162.243.32',
	   '111.155.116.207',
	   '111.155.124.91',
	   '123.138.89.130',
	   '79.172.242.145',
	   '113.69.37.44',
	   '202.94.198.133',
	   '120.237.62.177',
	   '222.128.83.39',
	   '36.76.187.207',
	   '191.210.75.197',
	   '60.162.243.32',
	   '60.205.176.13',
	   '177.43.57.48',
	   '111.155.116.212',
	   '218.75.75.133',
	   '134.35.246.177',
	   '60.185.129.253',
	   '115.231.175.68',
	   '200.159.124.60',
	   '58.52.201.119',
	   '141.196.146.20',
	   '58.62.207.53',
	   '218.247.161.37',
	   '175.155.24.31',
	   '207.234.146.197',
	   '114.107.54.10',
	   '111.155.116.212',
	   '121.226.175.101',
	   '116.62.45.185',
	   '120.132.26.30',
	   '64.29.148.16',
	   '59.76.81.3',
	   '121.69.20.2',
	   '183.50.107.148',
	   '115.210.181.127',
	   '121.232.146.106',
	   '117.90.0.225',
	   '59.120.104.56',
	   '61.178.63.197',
	   '60.185.129.253',
	   '167.206.55.215',
	   '175.155.25.18',
	   '14.28.138.161',
	   '201.37.5.232',
	   '121.13.164.231',
	   '117.90.0.225',
	   '191.22.182.221',
	   '183.238.40.167',
	   '60.12.227.208',
	   '210.74.130.34',
	   '124.207.132.242',
	   '138.255.105.51',
	   '93.110.167.253',
	   '110.73.5.221',
	   '119.39.112.218',
	   '200.174.85.193',
	   '218.86.128.100',
	   '121.232.146.233',
	   '202.137.25.8',
	   '200.223.225.12',
	   '199.96.38.16',
	   '175.155.24.30',
	   '120.43.48.205',
	   '138.68.140.31',
	   '223.223.194.29',
	   '200.222.81.178',
	   '123.138.89.130',
	   '141.196.71.132',
	   '218.86.128.100',
	   '122.18.111.127',
	   '115.46.71.70',
	   '120.132.26.38',
	   '134.35.246.177',
	   '63.149.98.23',
	   '178.238.213.59',
	   '121.9.221.188',
	   '36.25.58.174',
	   '60.13.143.99',
	   '119.5.0.62',
	   '219.43.228.154',
	   '63.149.98.23',
	   '119.132.34.143',
	   '120.194.18.90',
	   '221.204.246.116',
	   '138.255.105.51',
	   '119.254.100.151',
	   '222.128.83.39',
	   '124.207.132.242',
	   '163.125.74.115',
	   '223.223.194.29',
	   '124.88.67.31',
	   '63.149.98.23',
	   '59.127.104.238',
	   '203.162.224.139',
	   '120.43.48.205',
	   '122.228.25.97',
	   '203.172.135.14',
	   '59.76.81.3',
	   '138.68.140.31',
	   '60.250.139.213',
	   '192.129.204.8',
	   '123.138.89.130',
	   '123.149.254.6',
	   '208.92.94.190',
	   '203.140.175.154',
	   '218.247.161.37',
	   '60.190.96.190',
	   '138.68.171.147',
	   '115.231.105.109',
	   '115.46.71.70',
	   '183.45.172.21',
	   '123.149.254.6',
	   '219.101.35.83',
	   '219.34.2.65',
	   '114.97.220.167',
	   '119.39.112.218',
	   '219.109.124.214',
	   '116.242.227.201',
	   '219.101.35.83',
	   '61.244.212.97',
	   '122.18.111.127',
	   '218.86.128.100',
	   '163.125.74.115',
	   '122.228.25.97',
	   '36.25.58.174',
	   '115.210.181.127',
	   '141.196.71.132',
	   '128.171.151.243',
	   '120.43.48.205',
	   '210.69.23.212',
	   '111.155.124.91',
	   '219.109.124.214',
	   '119.254.100.151',
	   '122.18.111.127',
	   '111.155.116.207',
	   '124.88.67.35',
	   '203.172.135.14',
	   '222.186.45.119',
	   '1.179.181.17',
	   '223.223.194.29',
	   '120.237.62.177',
	   '138.255.105.51',
	   '120.43.48.205',
	   '60.185.129.253',
	   '120.194.18.90',
	   '178.62.96.241',
	   '220.57.168.106',
	   '83.219.5.134',
	   '119.5.1.14',
	   '119.5.0.18',
	   '220.57.168.106',
	   '200.41.104.57',
	   '124.88.67.52',
	   '200.41.104.57',
	   '119.254.100.151',
	   '114.97.220.167',
	   '114.97.220.167',
	   '61.132.171.173',
	   '123.138.89.130',
	   '101.86.112.186',
	   '219.43.228.154',
	   '117.90.0.225',
	   '119.5.1.6',
	   '61.237.131.59',
	   '36.76.187.207',
	   '128.171.151.243',
	   '178.62.96.241',
	   '122.228.25.97',
	   '119.5.0.18',
	   '45.76.135.196',
	   '116.62.45.185',
	   '61.237.131.59',
	   '125.209.84.78',
	   '183.234.143.242',
	   '210.69.23.212',
	   '174.32.129.110',
	   '124.88.67.31',
	   '221.195.40.145',
	   '220.194.55.244',
	   '116.62.45.185',
	   '119.254.100.151',
	   '119.5.1.6',
	   '119.254.100.151',
	   '61.244.212.97',
	   '59.127.104.238',
	   '61.191.173.31',
	   '59.127.104.238',
	   '101.86.112.186',
	   '222.186.45.119',
	   '116.62.45.185',
	   '61.244.212.97',
	   '124.88.67.31',
	   '222.186.45.119',
	   '119.5.1.14',
	   '210.69.23.212',
	   '120.132.26.38',
	   '138.68.160.106',
	   '178.238.213.59',
	   '60.183.204.253',
	   '61.237.131.59',
	   '36.76.187.207',
	   '119.254.100.151',
	   '119.254.100.151',
	   '120.237.62.177',
	   '125.109.198.67',
	   '138.197.32.85',
	   '124.239.177.85',
	   '178.238.213.59',
	   '175.155.24.30',
	   '138.197.32.85',
	   '116.62.45.185',
	   '119.5.0.62',
	   '138.197.32.85',
	   '116.62.45.185',
	   '61.132.171.173',
	   '61.191.173.31',
	   '116.62.45.185',
	   '116.62.45.185',
	   '63.149.98.170',
	   '210.69.23.212',
	   '182.108.67.6',
	   '141.196.146.20',
	   '119.254.100.151',
	   '124.88.67.52',
	   '124.88.67.52',
	   '123.138.89.130',
	   '124.88.67.52',
	   '119.254.100.151',]

if __name__ == '__main__':
	start_urls = set()
	for ip in usable_lst:
		start_url = db.query(ProxyItem.start_url ).filter(ProxyItem.ip==ip).first()[0]
		start_urls.add(start_url)
	import pprint
	pprint.pprint(start_urls)

	#for item in db.query(RequestResponseMap).all():
	#	item = Response.loads(item.response)
	#	if '/11/' in item.url:
	#		pprint.pprint(item.__dict__)
	#		print item.body
